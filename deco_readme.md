# チャットデコレーション! Chat Decoration! for わんコメ v0.4

最終更新日：2024/03/27

配信者のためのコメントアプリ「わんコメ」で使用できるテンプレートと、そのテンプレートを生成するジェネレータです。

## このコードを利用するときは

- わんコメ(https://onecomme.com/) の利用規約に基づきます。
- わんコメの利用規約に基づき、コードに限っては商業利用も含め自由に利用することができます。
- このコードの使用に関連して生じた損害について一切の責任を負いません。このコードの使用は自己責任で行ってください。
- 現在はベータ版のため、コードの動作は保証しません。コードや仕様は予告なく変更される可能性があります。
- わんコメのテンプレートをベースに改変しており、テンプレエディタを適用できます。ただし、すべてのエディタの変更を保証するものではありません。

## このテンプレートは何？

### ジェネレータを搭載!デコレーションのカスタムができるよ

- 同梱されている Generator.html から、文字色、背景色がカンタンにセットできます。背景には、グラデーションのセットも可能。
- 背景に画像をセットできます。位置調整もできるよ。

### #deco を付けてチャットすると、背景色が変化!

- 「#deco」をチャットの頭に付けると、ランダムで背景色が変化します。ランダムには重さを付けることも可能。10回に1回しか出ない、レアなデコレーションも作れちゃう。
- 標準で10パターン。「しろ」「くろ」「あか」「おれんじ」「きいろ」「みどり」「みずいろ」「あお」「むらさき」「ぴんく」
- 「#1」等と、#＋数値でコメントすると、該当する色のデコレーションを指定できます。
- なお、ギフト、スーパーチャットの文字色・背景色は、デコレーションよりも優先されます。

### 手持ちのキャラクター画像をチャット欄に追加!

- 画像はimgフォルダに入れてね。画像の大きさは統一したほうが、トラブルが少ないです。200px x 100pxくらいがいいかも。

### プレゼント企画に！ユーザー専用のデコレーションも。

- メンバー専用やモデレーター専用、特定のユーザー専用のデコレーションも追加できます。派手にカスタマイズして、視聴者さんを驚かそう！

## 導入方法

### テンプレートをOBSに追加する

- わんコメの右上にある【…】(三点リーダー) ＞ フォルダを開く ＞ テンプレートフォルダ を選択
- customフォルダに、解答したフォルダ「chatdeco」を入れる
- 「chatdeco」のテンプレートをOBSに追加

### 【重要】OBSの設定・プロパティを変更する

- 追加したテンプレート「index.html」という名称から、わかりやすい名前に変更する(deco等)
- プロパティから**「OBSで音声を制御する」と、「表示されていないときにソースをシャットダウンする」にチェック☑**を入れる
- プロパティから幅・高さを変更する。目安としては、幅550、高さ1080です(画面が1920x1080の場合)
- OBSの音声ミキサーの【︙】(三点リーダー)＞「オーディオの詳細プロパティ」から、↑で変更したWordPartyの名称を探し、「音声モニタリング」の設定を「モニターと出力」に変更する
  - この設定をしていないと、**「配信者は聞こえるのに配信動画では音声が乗っていない」「アナウンスが二重三重に出てくる」「非表示にしてるのに勝手に音声が鳴る」といった不具合**が出ます。

## ジェネレーターのつかいかた

### Generator.html を開き、カスタマイズを行う

- そのままでも一応使えますが、**カスタマイズ推奨**です。
- Generator.html を開くと、同フォルダにある userData.jsを読み込みます。
- **自動保存されません。**編集後は、必ず保存作業を行って下さい。
  - 保存するときは、右上の保存ボタンを押し、userData.js を出力、Generator.htmlと同じフォルダに上書き保存して下さい。
- Chromeでのみ動作確認しています。FirefoxやEdge等では動作確認しておりません。ご了承下さい。

### 保存作業について

- 右上の保存ボタンから、同フォルダにある、userData.js を上書き保存することで、設定変更が可能になります（他アプリと違って手間が多いですが、ご了承下さい）

### テンプレートを出力する

- 保存の左側にあるリストから選び、保存ボタンを押すことで、該当するテンプレートを出力することができます。
- 出力されるのは、index.html　style.css　thumb.png　の3つです。右クリックから「名前を付けてリンク先を保存」を選択して、Generator.htmlと同じフォルダに入れて下さい。



## カスタマイズ：#deco

### カスタマイズ：#ベーシック

-  最大50個まで設定可能です。
-  ドラッグで順番を入れ替えられます。
- 各項目をクリックすると、詳細ダイアログが開きます

  - カラーデータに入っているセットがリストに並んでいますので、選ぶだけで設定が適用されます。
-  Weightについて:出現率。数が多いほど、出やすくなります。逆に0にすれば、ランダムでは出現しなくなります。

### カスタマイズ：ロール

- だれでも/メンバー/モデレーター/配信者 の４段階で、設定できます。
- 機能をONにすると、自動でデコレーションが付与されます。デフォルトは、配信者のみONになっています。
- 各項目をクリックすると、詳細ダイアログが開きます。
  - カラーデータに入っているセットがリストに並んでいますので、選ぶだけで設定が適用されます。

### カスタマイズ：ユーザー

- 最大50個まで設定可能です。
- ドラッグで順番を入れ替えられます。
- 各項目をクリックすると、詳細ダイアログが開きます。
  - カラーデータに入っているセットがリストに並んでいますので、選ぶだけで設定が適用されます。
- 適用したいユーザーネームを入力します。例として「ユーザー」と入力すれば、「テストユーザー」「ユーザーネーム」等と、その文字列が入っているユーザーが適用されます。
- ユーザーネームは、最大10項目まで入力できます。

## カスタマイズ：カラーデータ

### カスタマイズ：テキスト色

- 最大50個まで設定可能です。
- ドラッグで順番を入れ替えられます。
- 各項目をクリックすると、詳細ダイアログが開きます。
  - 文字色を変更できる項目のみです。
- 右側の✖ボタンを押すと、設定を削除できます。
  - 削除すると、＃ベーシック、ロール、ユーザーで使われている項目は、標準に戻されます。
- ✎鉛筆ボタンを押すと、リストの名前を変更できます。

### カスタマイズ：背景色

- 最大50個まで設定可能です。
- ドラッグで順番を入れ替えられます。
- 各項目をクリックすると、詳細ダイアログが開きます。
  - 文字色を変更できる項目のみです。
- 右側の✖ボタンを押すと、設定を削除できます。
  - 削除すると、＃ベーシック、ロール、ユーザーで使われている項目は、標準に戻されます。
- カラーの配色は、マテリアルカラー ( https://materialui.co/colors/ ) を基にしています。
- ✎鉛筆ボタンを押すと、リストの名前を変更できます。

### カスタマイズ：グラデーション

- 最大50個まで設定可能です。
- ドラッグで順番を入れ替えられます。
- 各項目をクリックすると、詳細ダイアログが開きます。
  - 詳細は CSS グラデーションの使用 ( https://developer.mozilla.org/ja/docs/Web/CSS/CSS_images/Using_CSS_gradients ) をご覧ください
  - CSSをObjectで渡してるので、CSSとは書き方が少し違う点はご了承下さい
  - 見た目が派手なグラデーションなら、Gradient Magic https://www.gradientmagic.com/　がおすすめです
- 複雑なグラデーションの場合、下記のカスタマイズ：背景画像の影響により、グラデーションが崩れてしまう可能性があります。
- ✎鉛筆ボタンを押すと、リストの名前を変更できます。

### カスタマイズ：背景画像

- 最大50個まで設定可能です。
- ドラッグで順番を入れ替えられます。
- 各項目をクリックすると、詳細ダイアログが開きます。
  - **【重要】画像は、予めGenerator.htmlにあるimgフォルダに入れておき、それを読むようにして下さい。**
  - 画像の位置や大きさ、並べ方を、個別に指定できます。が、この設定でグラデーションの表示が崩れる場合があります。
  - サンプルではキャラクターを表示させていますが、模様の画像でもOKです。
- ✎鉛筆ボタンを押すと、リストの名前を変更できます。

## カスタマイズ：設定

### カスタマイズ：基本設定

- ＃decoできる権限
  - 0:だれでも 1:メンバー以上 2:モデレーター以上 3:配信者のみ 4:OFF
  - 権限を持っているユーザーのみ、\#deco、または#1 等でデコできます。
- 自動でデコを付与する
  - 0:OFF 1:ON 2:毎回ランダムにする
  - 「＃decoできる権限」をOFFにしていても、こちらが1であれば、こちらが優先されデコレーションが付きます。
- announce_flag:アナウンスを有効にする。
  - 0:OFF 1:最初のアナウンスのみ 2:ON
  - 2にすると、変更が入る度にアナウンスされるので、ちょっとうるさいかも。
- 設定リセット
  - プリセットデータを読み込みます。

## コードの改変とライセンス

- このコードは、改変自由です。
- また、わんコメの利用規約に基づき、コードに限っては商業利用も含め自由に利用することができます。
- コードがあまり綺麗でない点はご了承ください。

## クレジット：イラストについて

- ドット絵のイラスト：PIXELART TOWN
  https://pixelarttown.net/
- イラスト素材の再配布は、改変したものも含め禁止です。
- イラストの利用については、各配布サイトの利用規約をご確認ください。

## バージョン情報

v0.4 24/03/28 ジェネレータを作成。コードなしで設定変更が可能に。

- 大幅な仕様変更により、以前のバージョンとの互換性がありません。

v0.2 24/03/03 大幅な仕様変更を行いました

- デコを毎回ランダムにする機能を搭載
- デコを削除する機能(!deco clear)の追加
- 他細かい不具合の修正

v0.1 : 24/02/29 初版

------

せすじピンとしてます @pintocuru
https://twitter.com/pintocuru
https://www.youtube.com/@pintocuru
